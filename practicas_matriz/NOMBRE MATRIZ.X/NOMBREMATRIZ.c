/*
 * File:   NOMBREMATRIZ.c
 * Author: Licea
 *
 * Created on November 27, 2023, 11:16 AM
 */


#include <avr/io.h>
#include <util/delay.h>

// Definiciones de pines para filas y columnas de la matriz de LED
#define PORT_Fila PORTA
#define DDR_Fila DDRA

#define PORT_Columna PORTB
#define DDR_Columna DDRB

// Matriz que representa cada letra en una matriz de 8x8 LED
const uint8_t letras[26][8] = {
    // A
    {0x3C, 0x66, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66},
    // B
    {0x7C, 0x66, 0x66, 0x7C, 0x66, 0x66, 0x66, 0x7C},
    // C
    {0x3C, 0x66, 0x60, 0x60, 0x60, 0x60, 0x66, 0x3C},
    // D
    {0x78, 0x6C, 0x66, 0x66, 0x66, 0x66, 0x6C, 0x78},
    // E
    {0x7E, 0x60, 0x60, 0x7C, 0x60, 0x60, 0x60, 0x7E},
    // F
    {0x60, 0x60, 0x60, 0x7C, 0x60, 0x60, 0x60, 0x7E},
    // G
    {0x3E, 0x66, 0x66, 0x60, 0x6E, 0x66, 0x66, 0x3E},
    // H
    {0x66, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66, 0x66},
    // I
    {0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C},
    // J
    {0x1E, 0x33, 0x33, 0x18, 0x18, 0x18, 0x18, 0x18},
    // K
    {0x66, 0x66, 0x6C, 0x78, 0x78, 0x6C, 0x66, 0x66},
    // L
    {0x7E, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60},
    // M
    {0xC6, 0xC6, 0xC6, 0xD6, 0xD6, 0xFE, 0xEE, 0xC6},
    // N
    {0xC6, 0xC6, 0xE6, 0xF6, 0xDE, 0xCE, 0xC6, 0xC6},
    // O
    {0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C},
    // P
    {0x60, 0x60, 0x60, 0x7C, 0x66, 0x66, 0x66, 0x7C},
    // Q
    {0x3E, 0x6C, 0x6C, 0x66, 0x66, 0x66, 0x66, 0x3C},
    // R
    {0x66, 0x66, 0x6C, 0x7C, 0x66, 0x66, 0x66, 0x7C},
    // S
    {0x3C, 0x66, 0x60, 0x3C, 0x06, 0x06, 0x66, 0x3C},
    // T
    {0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7E},
    // U
    {0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66},
    // V
    {0x18, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66},
    // W
    {0xC6, 0xEE, 0xFE, 0xD6, 0xD6, 0xC6, 0xC6, 0xC6},
    // X
    {0xC6, 0xC6, 0x6C, 0x38, 0x38, 0x6C, 0xC6, 0xC6},
    // Y
    {0x18, 0x18, 0x18, 0x3C, 0x66, 0x66, 0x66, 0x66},
    // Z
    {0x7E, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x40, 0x7E}
};

// Variable que almacena el desplazamiento de las columnas
int desplazamiento = 0;

void encenderLetra(const uint8_t letra[8]) {
    for (int i = 0; i < 8; i++) {
        PORT_Fila = letra[i]; // Activar las filas según la letra
        
        // Configurar las columnas para encender el LED correspondiente
        // Usar la variable desplazamiento para mover las columnas a la izquierda
        PORT_Columna = ~((1 << i) << desplazamiento);
        
        _delay_ms(1); // Retardo de 10 milisegundos para visualizar la letra
    }
}

int main() {
    DDR_Fila = 0xFF; // Configurar filas como salidas
    DDR_Columna = 0xFF; // Configurar columnas como salidas

    // Arreglo de índices para mostrar el nombre "EDUARDO"
    int nombre[7] = {4, 3, 20, 0, 17, 3, 14}; // E, D, U, A, R, D, O

    while (1) {
        for (int letra = 0; letra < 7; letra++) { // Recorrer solo las letras del nombre
            for (int repetir = 0; repetir < 10; repetir++) { // Repetir 10 veces cada letra
                encenderLetra(letras[nombre[letra]]); // Mostrar la letra correspondiente
                // Retardo para mantener la letra encendida
                _delay_ms(60);
                desplazamiento++; // Incrementar el desplazamiento de las columnas
            if (desplazamiento == 8) { // Si el desplazamiento llega a ocho
                desplazamiento = 0; // Reiniciar el desplazamiento a cero
            }
            }
            
        }
    }

    return 0;
}