/*
 * File:   MATRIZ0AF.c
 * Author: Licea
 *
 * Created on November 27, 2023, 11:08 AM
 */


#include <avr/io.h>
#include <util/delay.h>

// Definiciones de pines para filas y columnas de la matriz de LED
#define PORT_Fila PORTA
#define DDR_Fila DDRA

#define PORT_Columna PORTB
#define DDR_Columna DDRB

// Matriz que representa cada valor hexadecimal en una matriz de 8x8 LED
const uint8_t hexadecimales[16][8] = {
    // 0
    {0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C},
    // 1
    {0x18, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C},
    // 2
    {0x7E, 0x06, 0x06, 0x3E, 0x60, 0x60, 0x60, 0x7E},
    // 3
    {0x7E, 0x06, 0x06, 0x3E, 0x06, 0x06, 0x06, 0x7E},
    // 4
    {0x66, 0x66, 0x66, 0x7E, 0x06, 0x06, 0x06, 0x06},
    // 5
    {0x7E, 0x60, 0x60, 0x7E, 0x06, 0x06, 0x06, 0x7E},
    // 6
    {0x3C, 0x60, 0x60, 0x7C, 0x66, 0x66, 0x66, 0x3C},
    // 7
    {0x7E, 0x06, 0x06, 0x0C, 0x18, 0x18, 0x18, 0x18},
    // 8
    {0x3C, 0x66, 0x66, 0x3C, 0x66, 0x66, 0x66, 0x3C},
    // 9
    {0x3C, 0x66, 0x66, 0x3E, 0x06, 0x06, 0x06, 0x3C},
    // A
    {0x3C, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66, 0x66},
    // B
    {0x7C, 0x66, 0x66, 0x7C, 0x66, 0x66, 0x66, 0x7C},
    // C
    {0x3C, 0x66, 0x60, 0x60, 0x60, 0x60, 0x66, 0x3C},
    // D
    {0x78, 0x6C, 0x66, 0x66, 0x66, 0x66, 0x6C, 0x78},
    // E
    {0x7E, 0x60, 0x60, 0x7C, 0x60, 0x60, 0x60, 0x7E},
    // F
    {0x60, 0x60, 0x60, 0x7C, 0x60, 0x60, 0x60, 0x7E}
};

void encenderLetra(const uint8_t letra[8]) {
    for (int i = 0; i < 8; i++) {
        PORT_Fila = letra[i]; // Activar las filas según la letra
        
        // Configurar las columnas para encender el LED correspondiente
        PORT_Columna = ~(1 << i);
        
        _delay_ms(1); // Retardo de 10 milisegundos para visualizar la letra
    }
}

int main() {
    DDR_Fila = 0xFF; // Configurar filas como salidas
    DDR_Columna = 0xFF; // Configurar columnas como salidas

    // Variable que representa el valor hexadecimal actual
    int valor = 0;

    while (1) {
        // Mostrar el valor hexadecimal en la matriz de LED
        encenderLetra(hexadecimales[valor]);
        
        // Incrementar el valor y usar el módulo para que vuelva a 0 cuando llegue a 16
        valor = (valor + 1) % 16;
        
        // Retardo para mantener el valor encendido
        _delay_ms(100);
    }

    return 0;
}